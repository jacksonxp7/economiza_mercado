<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercado Comparador</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="main.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap');
    </style>
</head>

<body>

    <header id="header">
        <h1>Compara Preço</h1>
    </header>

    <main id="container">

        <!-- TELA 1: COMPARADOR -->
        <div id="comparador" class="page">
            <div id="config-selecao">
                <div class="mercado-selecionado" id="mercado-a-display">
                    <h2>Comparação A</h2>
                    <p class="total-display" id="total-a">R$ 0,00</p>
                </div>
                <div class="mercado-selecionado" id="mercado-b-display">
                    <h2>Comparação B</h2>
                    <p class="total-display" id="total-b">R$ 0,00</p>
                </div>
            </div>
            <div id="comparador-preco">
                <div class="compara-coluna" id="compare-list-a">
                    <!-- Itens da Comparação A serão inseridos aqui -->
                </div>
                <div class="compara-coluna" id="compare-list-b">
                    <!-- Itens da Comparação B serão inseridos aqui -->
                </div>
            </div>
            <div id="comparison-result" class="diferente_total">
                Selecione os dados na aba de Configurações para comparar.
            </div>
        </div>

        <!-- TELA 2: ADICIONAR ITENS -->
        <div id="itens" class="page hide">
            <div class="adicionar_itens_form">
                <h3>Adicionar Novo Item</h3>
                <form id="add-item-form">
                    <input type="text" id="input_mercado" placeholder="Nome do Mercado" required>
                    <input type="text" id="input_produto" placeholder="Nome do Produto" required>
                    <input type="text" id="input_marca" placeholder="Marca (opcional)">
                    <div class="form-row">
                        <select id="input_mes" required>
                            <option value="">Mês...</option>
                            <option value="1">Janeiro</option>
                            <option value="2">Fevereiro</option>
                            <option value="3">Março</option>
                            <option value="4">Abril</option>
                            <option value="5">Maio</option>
                            <option value="6">Junho</option>
                            <option value="7">Julho</option>
                            <option value="8">Agosto</option>
                            <option value="9">Setembro</option>
                            <option value="10">Outubro</option>
                            <option value="11">Novembro</option>
                            <option value="12">Dezembro</option>
                        </select>
                        <input type="number" id="input_ano" placeholder="Ano" required>
                    </div>
                    <!-- *** MODIFICADO ***: Adicionado campo de quantidade e agrupado com preço -->
                    <div class="form-row">
                        <input type="number" step="0.01" id="input_preco" placeholder="Preço Unitário" required>
                        <input type="number" id="input_quantidade" value="1" placeholder="Qtd" required>
                    </div>
                    <button type="submit" class="adicionar">Adicionar Item</button>
                    <!-- *** NOVO ***: Display para o total da compra atual -->
                    <div id="running-total-display">Total desta compra: R$ 0,00</div>
                </form>
            </div>

            <div class="mostrar_itens">
                <h3>Itens Cadastrados</h3>
                <div id="all-items-list">
                    <!-- Lista de todos os itens será inserida aqui -->
                </div>
            </div>
        </div>

        <!-- TELA 3: CONFIGURAÇÕES -->
        <div id="configuracoes" class="page hide">
            <h2>Configurações de Comparação</h2>
            <div class="config-box">
                <p>Escolha os dados para cada lado da comparação.</p>
                
                <div class="comparison-group">
                    <h4>Lado A</h4>
                    <select id="select-mercado-a"></select>
                    <select id="select-mes-a"></select>
                    <select id="select-ano-a"></select>
                </div>

                <div class="comparison-group">
                    <h4>Lado B</h4>
                    <select id="select-mercado-b"></select>
                    <select id="select-mes-b"></select>
                    <select id="select-ano-b"></select>
                </div>
            </div>
             <div class="config-box">
                <h3>Gerenciar Dados</h3>
                <button id="clear-all-data" class="danger">Apagar Todos os Itens</button>
            </div>
        </div>

    </main>
    
    <nav id="nav-bar">
        <button data-page="comparador" class="nav-button active">Comparar</button>
        <button data-page="itens" class="nav-button">Itens</button>
        <button data-page="configuracoes" class="nav-button">Configurações</button>
    </nav>

</body>

</html>